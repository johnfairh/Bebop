// J2 FW2020 theme
//
// Distributed under the MIT license, https://github.com/johnfairh/J2/blob/master/LICENSE

// Colours

$col-header-footer-bg: $gray-800;
$col-header-footer-fg: $gray-200;
$col-navigation-bg:    $gray-100;
$col-navigation-fg:    $gray-900;
$col-navigation-fg2:   $gray-600;
$col-body-fg:          $gray-900;
$col-body-bg:          $white;

$body-link-color: #4183c4;

$navigation-border-color: $gray-400;
$navigation-border: 1px solid $navigation-border-color;

@mixin header-footer-cols {
  color: $col-header-footer-fg;
  background-color: $col-header-footer-bg;
  a {
    color: $col-header-footer-fg;
  }
}

@mixin navigation-base-cols {
  color: $col-navigation-fg;
  background-color: $col-navigation-bg;
}

@mixin navigation-cols {
  @include navigation-base-cols();
  a {
    color: $col-navigation-fg;
  }
}

@mixin body-cols {
  color: $col-body-fg;
  background-color: $col-body-bg;
  a {
    color: $body-link-color;
  }
}

a:hover {
  opacity: .75;
}

body {
  @include navigation-base-cols();
}

.j2-article {
  @include body-cols();
}

.j2-breadcrumb {
  @include navigation-cols();
  border-bottom: $navigation-border;
}

.j2-nav {
  @include navigation-base-cols();
  min-width: 140px;
  overflow-x: scroll;
  border-right: $navigation-border;
}

.j2-footer {
  @include navigation-cols();
  border-top: $navigation-border;
  border-bottom: $navigation-border;
}

.j2-titlebar {
  @include header-footer-cols();
  @extend .navbar-dark;
}

.j2-coverage {
  @extend .small;
  opacity: .5;
}

/* Nav width refinements */

@include media-breakpoint-up(lg) {
  .j2-nav {
    max-width: 300px;
    @supports (position: sticky) {
      position: sticky;
      top: 92px;
      max-height: subtract(100vh, 92px); /* XXX breadcrumbs + header */
      overflow-y: auto;
    }
  }

  .j2-titlebar {
    @supports (position: sticky) {
      position: sticky;
      top: 0;
      z-index: 1020;
    }
  }

  .j2-breadcrumb-nav {
    @supports (position: sticky) {
      position: sticky;
      top: 56px;
      z-index: 1010; /* Must be less than titlebar for dropdown to work! */
    }
  }
}

/* Adjust for smalltext (XXX rems) */

.breadcrumb {
  padding-top: 8px;
  padding-bottom: 8px;
  margin: 0;
}

/* ??? */

/* Searchbar */

.form-control::placeholder {
  color: $gray-400;
}

.navbar-nav form:focus-within {
  width: 60%;
}

/* Language-switcher menu, positioning and UI */

.j2-langmenu {
  padding: .75rem 1rem .25rem;
}

.dropdown-toggle:focus {
  outline: none;
}

.dropdown-menu {
  @include navigation-cols();
  top: 0;
  min-width: 0;
}

/* For footer: linespacing doesn't decrease when 'small' */
.small p {
  margin-bottom: .8rem;
}

/* Left navigation */
.j2-nav-list {
  padding-left: 0;
  line-height: 1.7;
  list-style-type: none;

  > li {
    padding-top: .5rem;
    padding-bottom: .5rem;
  }

  ul {
    padding-left: .5rem;
    font-size: .95rem;
    list-style-type: none;
  }
}

@mixin colored-link($color) {
  color: $color;
  &:hover {
    color: $color;
    opacity: .75;
  }
}

.j2-nav-topic {
  @include colored-link($col-navigation-fg);

  display: block; // fill to right for hover

  &.active {
    font-weight: 600;
  }
}

.j2-nav-item {
  @extend .j2-nav-topic;
  @include colored-link($col-navigation-fg2);
}
